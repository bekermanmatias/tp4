<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Métodos Numéricos: Euler vs RK2 - Guía Interactiva</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <header class="site-header">
    <div class="container nav">
      <div class="brand">Euler vs RK2</div>
      <nav class="menu" aria-label="Secciones">
        <a href="#problema">Problema</a>
        <a href="#euler">Euler</a>
        <a href="#rk2">RK2</a>
        <a href="#laboratorio">Laboratorio</a>
        <a href="#conclusiones">Conclusiones</a>
        <a href="#casos-reales">Casos</a>
      </nav>
    </div>
  </header>

  <main>
    <!-- SECCIÓN 1: PROBLEMA -->
    <section id="problema" class="hero">
      <div class="container">
        <h1>Problema a Resolver</h1>
        
        <div class="content-block">
          <h2>¿Qué es un Problema de Valor Inicial (PVI)?</h2>
          <p class="lead">Buscamos resolver una <strong>Ecuación Diferencial Ordinaria (EDO)</strong> de la forma:</p>
          <div class="formula-box">
            \[ y'(t) = f(t, y) \quad \text{con condición inicial} \quad y(t_0) = y_0 \]
          </div>
          <p>Es decir, conocemos la <em>derivada</em> de \(y\) en cada punto, y queremos encontrar la función \(y(t)\) completa.</p>
        </div>

        <div class="two-cols">
          <div class="info-card">
            <h3>¿Por qué métodos numéricos?</h3>
            <p>Muchas EDOs <strong>no tienen solución analítica</strong> (no se pueden "despejar" con fórmulas exactas).</p>
            <p>Los métodos numéricos nos permiten <em>aproximar</em> la solución paso a paso, avanzando con un tamaño de paso \(h\) pequeño.</p>
          </div>
          <div class="info-card">
            <h3>Comparación</h3>
            <p><strong>Euler:</strong> El método más simple y directo. Es el "padre" de todos los métodos de paso.</p>
            <p><strong>RK2:</strong> La primera gran mejora en precisión. Usa información del punto medio del intervalo.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- SECCIÓN 2: MÉTODO DE EULER -->
    <section id="euler" class="section-light">
      <div class="container">
        <h1>Método de Euler</h1>
        <p class="subtitle">El método más simple: avanzar en línea recta con la pendiente actual.</p>

        <div class="method-explanation">
          <div class="step-card">
            <div class="step-number">1</div>
            <div class="step-content">
              <h3>Punto de partida</h3>
              <p>Comenzamos en \((t_0, y_0)\).</p>
            </div>
          </div>

          <div class="step-card">
            <div class="step-number">2</div>
            <div class="step-content">
              <h3>Calcular pendiente</h3>
              <p>La pendiente en ese punto es: \(k_1 = f(t_0, y_0)\)</p>
            </div>
          </div>

          <div class="step-card">
            <div class="step-number">3</div>
            <div class="step-content">
              <h3>Avanzar en línea recta</h3>
              <p>Nos movemos una distancia \(h\): \(y_1 = y_0 + h \cdot k_1\)</p>
            </div>
          </div>

          <div class="step-card">
            <div class="step-number">4</div>
            <div class="step-content">
              <h3>Repetir</h3>
              <p>Desde el nuevo punto, volvemos al paso 2.</p>
            </div>
          </div>
        </div>

        <div class="formula-highlight">
          <h3>Fórmula de Euler</h3>
          \[ y_{k+1} = y_k + h \cdot f(t_k, y_k) \]
          <p class="muted">Donde \(h\) es el tamaño del paso.</p>
        </div>

        <div class="pros-cons">
          <div class="pros">
            <h4>✓ Ventajas</h4>
            <ul>
              <li>Muy fácil de entender</li>
              <li>Rápido de calcular (1 evaluación por paso)</li>
              <li>Poco código</li>
            </ul>
          </div>
          <div class="cons">
            <h4>✗ Desventajas</h4>
            <ul>
              <li>Error acumulado grande</li>
              <li>Orden 1: \(\mathcal{O}(h)\)</li>
              <li>Necesita \(h\) muy pequeño para precisión</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- SECCIÓN 3: MÉTODO RK2 -->
    <section id="rk2" class="section-light">
      <div class="container">
        <h1>Método de Runge-Kutta de orden 2 (RK2)</h1>
        <p class="subtitle">Más preciso: usa Euler hasta la mitad del intervalo y luego corrige con la pendiente en ese punto medio.</p>

        <div class="method-explanation">
          <div class="step-card">
            <div class="step-number">1</div>
            <div class="step-content">
              <h3>Pendiente inicial</h3>
              <p>Igual que Euler: \(k_1 = f(t_k, y_k)\)</p>
            </div>
          </div>

          <div class="step-card">
            <div class="step-number">2</div>
            <div class="step-content">
              <h3>Predicción a la mitad</h3>
              <p>Usamos Euler hasta la mitad del paso: \(t_{\text{medio}} = t_k + \tfrac{h}{2}\), \(y_{\text{medio}} = y_k + \tfrac{h}{2} \cdot k_1\)</p>
            </div>
          </div>

          <div class="step-card">
            <div class="step-number">3</div>
            <div class="step-content">
              <h3>Pendiente en el punto medio</h3>
              <p>Calculamos la pendiente en el punto medio: \(k_2 = f(t_k + \tfrac{h}{2}, y_{\text{medio}})\)</p>
            </div>
          </div>

          <div class="step-card">
            <div class="step-number">4</div>
            <div class="step-content">
              <h3>Avanzar con k2</h3>
              <p>Usamos la pendiente del punto medio para todo el intervalo: \(y_{k+1} = y_k + h \cdot k_2\)</p>
            </div>
          </div>
        </div>

        <div class="formula-highlight">
          <h3>Fórmulas de RK2</h3>
          \[ k_1 = f(t_k, y_k) \]
          \[ k_2 = f\left(t_k + \frac{h}{2}, y_k + \frac{h}{2} \cdot k_1\right) \]
          \[ y_{k+1} = y_k + h \cdot k_2 \]
        </div>

        <div class="pros-cons">
          <div class="pros">
            <h4>✓ Ventajas</h4>
            <ul>
              <li>Mucho más preciso que Euler</li>
              <li>Orden 2: \(\mathcal{O}(h^2)\)</li>
              <li>Buen balance precisión/coste</li>
            </ul>
          </div>
          <div class="cons">
            <h4>✗ Desventajas</h4>
            <ul>
              <li>Más complejo que Euler</li>
              <li>2 evaluaciones de \(f\) por paso</li>
              <li>Doble coste computacional</li>
            </ul>
          </div>
        </div>

        <div class="insight-box">
          <h3>
            <svg class="inline-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 18h6"/>
              <path d="M10 22h4"/>
              <path d="M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 18 8a6 6 0 0 0-12 0c0 1.33.47 2.48 1.5 3.5.76.76 1.23 1.52 1.41 2.5"/>
            </svg>
            
          </h3>
          <p>Euler usa solo la pendiente inicial durante todo el intervalo. RK2 primero avanza hasta la mitad con Euler (usando \(k_1\)), luego evalúa la pendiente en ese punto medio (\(k_2\)) y usa esa pendiente más representativa para atravesar todo el intervalo, ¡por eso es mucho más preciso!</p>
        </div>
      </div>
    </section>

    <!-- SECCIÓN 4: LABORATORIO INTERACTIVO -->
    <section id="laboratorio" class="section-dark">
      <div class="container">
        <h1>Laboratorio Interactivo</h1>
        <p class="subtitle">Compara resultados en tiempo real.</p>

        <div class="lab-layout">
          <!-- Panel de control -->
          <div class="lab-controls">
            <h2>Configuración</h2>
            
            <div class="control-group">
              <label class="control-label">
                <span>Problema de ejemplo</span>
                <select id="pviSelect" class="control-input"></select>
              </label>
              <div class="pvi-info" id="pviDesc"></div>
            </div>

            <div class="control-group" id="customGroup" style="display: none;">
              <label class="control-label">
                <div class="label-row">
                  <span>\(f(t, y) =\)</span>
                  <span class="error-badge" id="customError" style="display: none;">Ecuación inválida</span>
                </div>
                <textarea id="customExpr" rows="3" placeholder="Ejemplo: y*(1-y) + sin(t)"></textarea>
              </label>
              <p class="help-text">Funciones disponibles: sin, cos, exp, log, sqrt, abs, pow. Usa ^ para potencias.</p>
              
              <label class="control-label">
                <div class="label-row">
                  <span>\(y(t) =\) (opcional)</span>
                  <span class="error-badge" id="exactError" style="display: none;">Solución inválida</span>
                </div>
                <textarea id="customExact" rows="2" placeholder="Ejemplo: 1/(1-0.2*t) (deja vacío si no conoces la solución)"></textarea>
              </label>
              <p class="help-text">Variables: t, y0 (condición inicial), t0 (tiempo inicial).</p>
            </div>

            <div class="control-group">
              <h3 data-tooltip="Define el intervalo de tiempo [t₀, t_f] y el valor inicial y₀ de la solución" title="">Intervalo y condición inicial</h3>
              <div class="input-row">
                <label class="control-label">
                  <span data-tooltip="Tiempo inicial del intervalo de solución" title="">\(t_0\)</span>
                  <input type="number" id="t0" step="any" class="control-input" />
                </label>
                <label class="control-label">
                  <span data-tooltip="Tiempo final del intervalo de solución" title="">\(t_f\)</span>
                  <input type="number" id="tf" step="any" class="control-input" />
                </label>
                <label class="control-label">
                  <span data-tooltip="Valor inicial de la función solución y(t) en t₀" title="">\(y_0\)</span>
                  <input type="number" id="y0" step="any" class="control-input" />
                </label>
              </div>
            </div>

            <div class="control-group">
              <h3 data-tooltip="Controla la precisión de la aproximación: valores menores de h dan mayor precisión pero más cálculos" title="">Tamaño de paso</h3>
              <label class="control-label">
                <span>h = <span id="hVal" class="value-badge">0.1</span></span>
                <input type="range" id="hRange" min="0.01" max="1" step="0.01" class="slider" />
              </label>
              <p class="help-text">Mueve el slider para ver el efecto del tamaño de paso en tiempo real.</p>
            </div>

            <div class="button-group">
              <button id="runBtn" class="btn btn-primary">Calcular</button>
              <button id="resetBtn" class="btn">Restablecer</button>
            </div>

            <div class="control-group">
              <h3 data-tooltip="Anima la construcción paso a paso de las soluciones numéricas para visualizar cómo se aproximan las curvas" title="">Animación</h3>
              <div class="button-group">
                <button id="animPlay" class="btn btn-small">▶ Play</button>
                <button id="animPause" class="btn btn-small">⏸ Pausa</button>
                <button id="animReset" class="btn btn-small">⟲ Reiniciar</button>
              </div>
              <label class="control-label">
                <span>Velocidad</span>
                <input type="range" id="animSpeed" min="0.25" max="2" step="0.25" value="1" class="slider" />
              </label>
            </div>
          </div>

          <!-- Resultados -->
          <div class="lab-results">
            <!-- Gráfica principal: 2 columnas -->
            <div class="result-section main-chart">
              <h2>Gráfica de Soluciones</h2>
              <div class="chart-container">
                <canvas id="chart"></canvas>
              </div>
            </div>

            <!-- Errores: columna izquierda -->
            <div class="result-section error-chart">
              <h2>Errores Absolutos</h2>
              <div class="chart-container small">
                <canvas id="errorChart"></canvas>
              </div>
            </div>

            <!-- Métricas: columna derecha -->
            <div class="result-section metrics">
              <h2 data-tooltip="Medidas de precisión comparando las soluciones numéricas con la solución exacta" title="">Métricas de Error</h2>
              <div class="metrics-grid">
                <div class="metric-card euler">
                  <div class="metric-label" data-tooltip="Error máximo absoluto del método de Euler: el mayor desvío entre la solución numérica y la exacta" title="">Euler - Max</div>
                  <div class="metric-value" id="eulerMax">—</div>
                </div>
                <div class="metric-card euler">
                  <div class="metric-label" data-tooltip="Error cuadrático medio (RMS) de Euler: raíz cuadrada del promedio de los errores al cuadrado" title="">Euler - RMS</div>
                  <div class="metric-value" id="eulerRms">—</div>
                </div>
                <div class="metric-card rk2">
                  <div class="metric-label" data-tooltip="Error máximo absoluto del método RK2: el mayor desvío entre la solución numérica y la exacta" title="">RK2 - Max</div>
                  <div class="metric-value" id="rk2Max">—</div>
                </div>
                <div class="metric-card rk2">
                  <div class="metric-label" data-tooltip="Error cuadrático medio (RMS) de RK2: raíz cuadrada del promedio de los errores al cuadrado" title="">RK2 - RMS</div>
                  <div class="metric-value" id="rk2Rms">—</div>
                </div>
              </div>
            </div>

            <!-- Coste: 2 columnas abajo -->
            <div class="result-section cost">
              <h2 data-tooltip="Medición del trabajo computacional requerido por cada método numérico" title="">Coste Computacional</h2>
              <div class="cost-grid">
                <div class="cost-card">
                  <div class="cost-label" data-tooltip="Cantidad total de pasos discretos usados para aproximar la solución en el intervalo [t₀, t_f]" title="">Número de pasos</div>
                  <div class="cost-value" id="costSteps">—</div>
                </div>
                <div class="cost-card">
                  <div class="cost-label" data-tooltip="Total de evaluaciones de la función f(t,y) realizadas por el método de Euler: 1 evaluación por paso" title="">Evaluaciones f - Euler</div>
                  <div class="cost-value" id="costEuler">—</div>
                </div>
                <div class="cost-card">
                  <div class="cost-label" data-tooltip="Total de evaluaciones de la función f(t,y) realizadas por el método RK2: 2 evaluaciones por paso (k₁ y k₂)" title="">Evaluaciones f - RK2</div>
                  <div class="cost-value" id="costRK2">—</div>
                  <div class="cost-note">×2 por paso</div>
                </div>
              </div>
              <p class="info-text" id="stepsInfo" data-tooltip="Resumen: número de pasos discretos y tamaño de paso efectivo ajustado para cubrir exactamente el intervalo" title=""></p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SECCIÓN 5: CONCLUSIONES -->
    <section id="conclusiones" class="section-light">
      <div class="container">
        <h1>Conclusiones y Recomendaciones</h1>

        <div class="comparison-table">
          <div class="table-header">
            <div></div>
            <div>Euler</div>
            <div>RK2</div>
          </div>
          <div class="table-row">
            <div class="row-label">Complejidad</div>
            <div class="cell good">Muy simple</div>
            <div class="cell neutral">Moderada</div>
          </div>
          <div class="table-row">
            <div class="row-label">Precisión</div>
            <div class="cell bad">Baja (\(\mathcal{O}(h)\))</div>
            <div class="cell good">Alta (\(\mathcal{O}(h^2)\))</div>
          </div>
          <div class="table-row">
            <div class="row-label">Evaluaciones por paso</div>
            <div class="cell good">1</div>
            <div class="cell neutral">2</div>
          </div>
        </div>

        <div class="two-cols">
          <div class="recommendation">
            <h3>Usa Euler cuando:</h3>
            <ul>
              <li>Estás aprendiendo métodos numéricos</li>
              <li>Necesitas un prototipo rápido</li>
              <li>Problema es muy simple</li>
              <li>La precisión no es crítica</li>
            </ul>
          </div>
          <div class="recommendation">
            <h3>Usa RK2 cuando:</h3>
            <ul>
              <li>Necesitas resultados confiables</li>
              <li>Quieres menos pasos para misma precisión</li>
              <li>El coste de evaluar \(f\) es bajo</li>
              <li>Es una aplicación real</li>
            </ul>
          </div>
        </div>

        <div class="key-insight">
          <div class="insight-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 18h6"/>
              <path d="M10 22h4"/>
              <path d="M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 18 8a6 6 0 0 0-12 0c0 1.33.47 2.48 1.5 3.5.76.76 1.23 1.52 1.41 2.5"/>
            </svg>
          </div>
          <p>RK2 requiere el doble de evaluaciones por paso, pero su error es \(\mathcal{O}(h^2)\) en vez de \(\mathcal{O}(h)\).</p>
          <p><strong>En la práctica:</strong> Para lograr la misma precisión, RK2 necesita menos pasos totales que Euler, ¡compensando el coste extra por paso!</p>
        </div>
      </div>
    </section>

    <!-- SECCIÓN 6: CASOS REALES INTERACTIVOS -->
    <section id="casos-reales" class="section-dark">
      <div class="container">
        <h1>¿Qué método usarías?</h1>
        <p class="subtitle">Elige el método más apropiado.</p>

        <div class="cases-grid" id="casesGrid">
          <!-- Los casos se cargarán dinámicamente -->
        </div>

        <div class="cases-score" id="casesScore" style="display: none;">
          <div class="score-card">
            <h3>Resultado</h3>
            <div class="score-value">
              <span id="scoreCorrect">0</span> / <span id="scoreTotal">0</span>
            </div>
            <p class="score-text" id="scoreText"></p>
            <button id="resetCases" class="btn btn-primary">Intentar de nuevo</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container">
      <p>Grupo 9 - Análisis Numérico S33 - 2025</p>
    </div>
  </footer>

  <script src="app.js"></script>
</body>
</html>
